<div class="container">
  <mat-card
  class="d-flex justify-content-center col-12"
  id="report_head"
  style="background-color: rgba(0, 150, 219, 0.68); height: 60px;
  margin:10px; "
  #reportHead
  >
    <mat-card  >
        <div style="font-size: 12px;">
          <span>Selectionner Rapport: &nbsp;</span>
          <select style="width: 150px" (change) ="getReportType($event)" >
              <option></option>
              <option *ngFor="let typ of reportType"
              value={{typ.id}}>{{typ.name}}</option>
          </select>
        </div>
      </mat-card>
      <mat-card >

          <div style="font-size: 12px;">
            <span>Selectionner Periode: &nbsp;</span>
            <select style="min-width: 50px;" (change) ="getPeriod($event)">
                <option></option>
              <option *ngFor="let period of reportPeriod"
              value={{period.id}}>{{period.name}}</option>
            </select>
          </div>
        </mat-card>

        <div >
          <button  mat-raised-button
          class="btn btn-success "
          (click)="populateReport()"

          >
          Lancer</button>
          <!-- <button
          type="button"
          class="btn btn-info"
          >Print</button> -->
        </div>
      </mat-card>
    <div
    class="col-lg-12"
    style="margin: 10px"
    >
    <h1 class="col-lg-12 " >{{title}}</h1>
    <br />
    <mat-card class="col-lg-12" id="report_Body" *ngIf="selectedType > 0 && selectedPeriod >0; noSelect">
        <!-- class="table table-hover table-striped table-sm" -->
        <!-- <div [hidden]="isLoading"> -->


      <table  mat-table [dataSource]="dataSource" matSort  class="mat-elevation-z8 table-striped " >
        <ng-container *ngFor="let c of modelEntity" [matColumnDef]="c.columnName">
          <!-- <thead class="black white-text"> -->
         <!-- <tr>
           <th *ngFor="let c of modelEntity; let i = index" scope="col" >
              {{c.columnReference}}
           </th>
         </tr> -->
        <!-- </thead> -->
        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{c.columnReference}} </th>
        <td mat-cell *matCellDef="let item ">
           {{c.dataType == 'Array' ? item[c.columnName][modelArrayEntity[0].columnName] :item[c.columnName]}}
          </td>
          <td mat-footer-cell *matFooterCellDef> {{ c.dataType == 'number' ? getTotal(item[c.columnName]) :''}} </td>
      </ng-container>
          <!-- <tbody>

            <tr *ngFor="let item of dataEntity ">
                  <td *ngFor="let model of modelEntity ">
                        {{model.dataType == 'Array' ? item[model.columnName][modelArrayEntity[0].columnName]: item[model.columnName]}}
                  </td>
            </tr>
          </tbody> -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          <tr mat-footer-row *matFooterRowDef="columnsToDisplay"></tr>
        </table>
         <!-- </div> -->
        <mat-paginator [pageSize]="10" [pageSizeOptions]="[2, 4, 6, 10, 20]">
        </mat-paginator>
  </mat-card>
<ng-template #noSelect>
  <p>
    [title]="Vous devez selectonner un type et une periode"
  </p>
</ng-template>
  </div>

</div>
